@{ ViewBag.Title = "Inicio";
    Layout = "~/Views/Shared/_LayoutPropiedad.cshtml"; }
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.0/jquery.min.js" type="text/javascript"></script>
<script src="~/Scripts/ApiProvincias.js"></script>
<style>
    .canton,
    .distrito {
        display: none;
    }

    .Oferta {
        position: absolute;
        right: 10px;
        top: 50px;
    }

    .color {
        border-color: goldenrod;
    }

    hr {
        border: 4px solid darkgoldenrod;
    }

    .fa-2x {
        letter-spacing: 8px;
    }
    .Apartado {
        position: absolute;
        left: 10px;
        bottom: 230px;
    }
</style>

<div class="row">
    <h1 style="text-align:center">Busqueda de Propiedades</h1>
    @using (Html.BeginForm("Inicio", "Propiedad", FormMethod.Get))
    {
<div class="row">
    <div class="col-lg-2 form-group">
        <label>Categoria propiedad</label>
        <select class="form-control" name="Cate" onChange="mostrar(this.value);">
            <option>Seleccione una categoria</option>
            @{ foreach (BienesRaices.Models.MostrarCategoria_Result Categoria in this.ViewBag.CargarCategoria)
                {
                    <option value="@Categoria.Id_Categoria_CA">@Categoria.Nombre_CA</option>

                }
            }
        </select>
    </div>
    <div class="col-lg-2 form-group" id="CanCuartos_C">
        <label>Cantidad de Cuartos</label>
        <select class="form-control" name="CanCuato">
            <option value="">Seleccione la cantidad</option>
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
            <option value="6">6</option>
        </select>
    </div>

    <div class="col-lg-2 form-group" id="CanBanos_C">
        <label>Cantidad de Baños</label>
        <select class="form-control" name="CanBano">
            <option value="">Seleccione la cantidad</option>
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
        </select>
    </div>

    <div class="col-lg-2 form-group " id="CanGarage_C">
        <label>Cantidad de Garajes</label>
        <select class="form-control" name="CanGara">
            <option value="">Seleccione la cantidad</option>
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
        </select>
    </div>

    <div class="col-lg-2 form-group ">
        <label>Estado de la propiedad</label>
        <select class="form-control" name="estado">
            <option value="">Seleccione el estado</option>
            <option value="Vendida">Vendida</option>
            <option value="Oculto">Oculta</option>
            <option value="Nuevo">Nueva</option>
            <option value="Apartado">Apartado</option>
        </select>
    </div>

    <div class="col-lg-2 form-group" id="TipoMoneda_P">
        <label>Tipo Moneda</label>
        <select class="form-control" name="tipo" onchange="moneda(this.value)">
            <option value="">Seleccione la Moneda</option>
            <option value="¢">Colones</option>
            <option value="$">Dolares</option>
        </select>
    </div>
    <div class="col-lg-2 form-group Colones">
        <label>Precio Inicial</label>
        <select name="precio02" size="1" class="form-control">
            <option value="0" selected>Seleccione un precio</option>
            <option value="1000000">1,000,000</option>
            <option value="2000000">2,000,000</option>
            <option value="3000000">3,000,000</option>
            <option value="4000000">4,000,000</option>
            <option value="5000000">5,000,000</option>
            <option value="6000000">6,000,000</option>
            <option value="7000000">7,000,000</option>
            <option value="8000000">8,000,000</option>
            <option value="9000000">9,000,000</option>
            <option value="10000000">10,000,000</option>
            <option value="20000000">20,000,000</option>
            <option value="30000000">30,000,000</option>
            <option value="40000000">40,000,000</option>
            <option value="50000000">50,000,000</option>
            <option value="60000000">60,000,000</option>
            <option value="70000000">70,000,000</option>
            <option value="80000000">80,000,000</option>
            <option value="90000000">90,000,000</option>
            <option value="100000000">100,000,000</option>
            <option value="200000000">200,000,000</option>
            <option value="300000000">300,000,000</option>
            <option value="400000000">400,000,000</option>
            <option value="500000000">500,000,000</option>
            <option value="600000000">600,000,000</option>
            <option value="700000000">700,000,000</option>
            <option value="800000000">800,000,000</option>
            <option value="900000000">900,000,000</option>
            <option value="1000000000">1,000,000,000</option>

        </select>
    </div>
    <div class="col-lg-2 form-group Colones">
        <label>Precio Final</label>
        <select name="precio03" size="1" class="form-control">
            <option value="0" selected>Seleccione un precio</option>
            <option value="1000000">1,000,000</option>
            <option value="2000000">2,000,000</option>
            <option value="3000000">3,000,000</option>
            <option value="4000000">4,000,000</option>
            <option value="5000000">5,000,000</option>
            <option value="6000000">6,000,000</option>
            <option value="7000000">7,000,000</option>
            <option value="8000000">8,000,000</option>
            <option value="9000000">9,000,000</option>
            <option value="10000000">10,000,000</option>
            <option value="20000000">20,000,000</option>
            <option value="30000000">30,000,000</option>
            <option value="40000000">40,000,000</option>
            <option value="50000000">50,000,000</option>
            <option value="60000000">60,000,000</option>
            <option value="70000000">70,000,000</option>
            <option value="80000000">80,000,000</option>
            <option value="90000000">90,000,000</option>
            <option value="100000000">100,000,000</option>
            <option value="200000000">200,000,000</option>
            <option value="300000000">300,000,000</option>
            <option value="400000000">400,000,000</option>
            <option value="500000000">500,000,000</option>
            <option value="600000000">600,000,000</option>
            <option value="700000000">700,000,000</option>
            <option value="800000000">800,000,000</option>
            <option value="900000000">900,000,000</option>
            <option value="1000000000">1,000,000,000</option>
        </select>
    </div>
    <div class="col-lg-2 form-group Dolares">
        <label>Precio Inicial</label>
        <select name="precio0" size="1" class="form-control">
            <option value="0">Seleccione un precio</option>
            <option value="1000">1,000</option>
            <option value="2000">2,000</option>
            <option value="3000">3,000</option>
            <option value="4000">4,000</option>
            <option value="5000">5,000</option>
            <option value="6000">6,000</option>
            <option value="7000">7,000</option>
            <option value="8000">8,000</option>
            <option value="9000">9,000</option>
            <option value="10000">10,000</option>
            <option value="20000">20,000</option>
            <option value="30000">30,000</option>
            <option value="40000">40,000</option>
            <option value="50000">50,000</option>
            <option value="60000">60,000</option>
            <option value="70000">70,000</option>
            <option value="80000">80,000</option>
            <option value="90000">90,000</option>
            <option value="100000">100,000</option>
            <option value="200000">200,000</option>
            <option value="300000">300,000</option>
            <option value="400000">400,000</option>
            <option value="500000">500,000</option>
            <option value="600000">600,000</option>
            <option value="700000">700,000</option>
            <option value="800000">800,000</option>
            <option value="900000">900,000</option>
            <option value="1000000">1,000,000</option>
            <option value="2000000">2,000,000</option>

        </select>
    </div>
    <div class="col-lg-2 form-group Dolares">
        <label>Precio Final</label>
        <select name="precio01" size="1" class="form-control" >
            <option value="0">Seleccione un precio</option>
            <option value="1000">1,000</option>
            <option value="2000">2,000</option>
            <option value="3000">3,000</option>
            <option value="4000">4,000</option>
            <option value="5000">5,000</option>
            <option value="6000">6,000</option>
            <option value="7000">7,000</option>
            <option value="8000">8,000</option>
            <option value="9000">9,000</option>
            <option value="10000">10,000</option>
            <option value="20000">20,000</option>
            <option value="30000">30,000</option>
            <option value="40000">40,000</option>
            <option value="50000">50,000</option>
            <option value="60000">60,000</option>
            <option value="70000">70,000</option>
            <option value="80000">80,000</option>
            <option value="90000">90,000</option>
            <option value="100000">100,000</option>
            <option value="200000">200,000</option>
            <option value="300000">300,000</option>
            <option value="400000">400,000</option>
            <option value="500000">500,000</option>
            <option value="600000">600,000</option>
            <option value="700000">700,000</option>
            <option value="800000">800,000</option>
            <option value="900000">900,000</option>
            <option value="1000000">1,000,000</option>
            <option value="2000000">2,000,000</option>
        </select>
    </div>
    <div class="col-lg-2 form-group ">
        <label>Provincia</label>
        <select class="form-control" id="provincias" name="Id_Provincia_L" onchange="getCantones(this.value);">
        </select>
    </div>
    <div class="col-lg-2 form-group canton">
        <label>Cantón</label>
        <select class="form-control" id="cantones" name="Id_Canton_L" onchange="getDistritos(this.value);">
        </select>
    </div>
    <div class="col-lg-2 form-group distrito">
        <label>Distrito</label>
        <select class="form-control" id="distritos" name="Id_Distrito_L">
        </select>
    </div>

    <div class="row">
        <br />
        <br />
        <div class="col-lg-12" style="text-align:center">
            <button type="submit" class="btn btn-info">Buscar</button>
        </div>
    </div>
    <br />
    <br />
    <hr />
</div>
    }
</div>

<div class="row">


    @{ foreach (BienesRaices.Models.MostrarPropiedadAdmin_Result posicion in this.Model)
        {
            <div class="card col-lg-3 color">
                    <div class="card-body" style="text-align:center">
                        <h1>@posicion.Nombre_P</h1>

                        <img src="~/images/@posicion.Ruta_I" height="200" width="100%" /> 
                        <label>Prioridad: @posicion.Nombre_Pri</label>
                        <br />
                        @if (posicion.Estado_P == "Apartado")
                        {
                            <img src="~/images/Apartado.png" width="30%" class="Apartado" alt="Alternate Text" />
                        }
                        @if (posicion.PrecioAntes_P != null || posicion.PrecioAntes_P == 0)
                        {
                            <label>Nuevo Precio:@posicion.Precios</label>
                            <br />
                            <img src="~/images/Oferta.png" width="30%" class="Oferta" alt="Alternate Text" />
                            <label style="text-decoration:line-through; color:red; font-weight:bold">Precio Antes:@posicion.Precio</label>
                        }
                        else
                        {
                            <label>Precio:@posicion.Precio</label>}
                        <br />
                        <label>@posicion.NombreProvincia_L ,@posicion.NombreCanton_L ,@posicion.NombreDistrito_L</label>
                        <p>Tipo: @posicion.Nombre_CA</p>

                        @if (posicion.Id_Categoria_CA != 3 && posicion.Id_Categoria_CA != 4)
                        {
                            if (posicion.CanCuartos_C >= 1)
                            {
                                <i class="fas fa-bed fa-2x ">@posicion.CanCuartos_C</i>
                            }
                            if (posicion.CanGarage_C >= 1)
                            {
                                <i class="fas fa-warehouse fa-2x">@posicion.CanGarage_C</i>
                            }
                            if (posicion.CanBanos_C >= 1)
                            {
                                <i class="fas fa-toilet fa-2x">@posicion.CanBanos_C</i>
                            }


                        }
                        <div class="mt-2"></div>
                        <div class="row">
                            <div class="col-lg-7">
                                @using (Html.BeginForm("ModificarPropiedad", "Propiedad", FormMethod.Get))
                                {

                                    <button id="Con" type="submit" name="idPropiedad" value="@posicion.Id_Propiedad_P" class="btn btn-info">Modificar</button>
                                }
                            </div>
                            <div class="col-lg-4">
                                @if (posicion.Estado_P == "Oculto")
                                {
                                    using (Html.BeginForm("OcultarPropiedad", "Propiedad", FormMethod.Post))
                                    {
                                        <input type="text" name="Estado" value="@posicion.Estado_P" style="display:none">
                                        <button id="Con" type="submit" name="idPropiedad" value="@posicion.Id_Propiedad_P" class="btn btn-secondary">Mostrar</button>
                                    }
                                }
                                else if (posicion.Estado_P != "Oculto")
                                {
                                    using (Html.BeginForm("OcultarPropiedad", "Propiedad", FormMethod.Post))
                                    {
                                        <input type="text" name="Estado" value="@posicion.Estado_P" style="display:none">
                                        <button id="Con" type="submit" name="idPropiedad" value="@posicion.Id_Propiedad_P" class="btn btn-danger">Ocultar</button>

                                    }
                                }
                            </div>
                        </div>
                    </div>
            </div> }
    }

</div>

<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyD3cOQNB4cQjQDSGWiB_nT2H2pEOuD3w60&callback=initMap" async defer></script>
<script>

    const formatter = new Intl.NumberFormat({
        style: 'currency',
        currency: '',
        minimumFractionDigits: 0
    })

    var slider = document.getElementById("myRange");
    var output = document.getElementById("demo");
    output.innerHTML = slider.value;

    slider.oninput = function () {
        output.innerHTML = formatter.format(this.value);

    }

    const formatters = new Intl.NumberFormat({
        style: 'currency',
        currency: '',
        minimumFractionDigits: 0
    })

    var slider1 = document.getElementById("myRange1");
    var output1 = document.getElementById("demo1");
    output1.innerHTML = slider1.value;

    slider1.oninput = function () {
        output1.innerHTML = formatters.format(this.value);

    }

</script>


